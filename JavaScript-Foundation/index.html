<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exercise: Fix This Code</title>
</head>

<body>

  <script>
    //fill array with 60000 elements
    // const list = new Array(60000).join("1.1").split(".");

    // function removeItemsFromList() {
    //   var item = list.pop();

    //   if (item) {
    //     removeItemsFromList();
    //   }
    // }

    // removeItemsFromList();

    // ANSWER
    //fill array with 60000 elements
    const listOne = new Array(60000).join("1.1").split(".");

    function removeItemsFromList() {
      var item = listOne.pop();

      if (item) {
        setTimeout(removeItemsFromList, 0);
      } else {
        console.log("End = " + listOne.length);
      }
    }

    removeItemsFromList();

    console.log("End = " + listOne.length);

  </script>
</body>

</html>